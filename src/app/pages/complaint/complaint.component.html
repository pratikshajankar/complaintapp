<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-heading" style="background-color: orange;">
                   <span class="heading" style="font-size: 20px;"> Complaint Info</span>
                   <button class="btn btn-primary" style="float: right;" data-bs-toggle="modal" data-bs-target="#complaintform" (click)="showsavebtn()">Add Complaint</button>
                </div>
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>SrNo</th>
                                <th>Complaint Title</th>
                                <th>Complaint Details</th>
                                <th>Created Date</th>
                                <th>Complaint Status</th>
                                <th>UserName</th>
                                <th>Department Name</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let com of complaintList;let sr=index">
                                <td>{{sr+1}}</td>
                                <td>{{com.complaintTitle}}</td>
                                <td>{{com.complaintDetails}}</td>
                                <td>{{com.createdDate|date}}</td>
                                <td>{{com.complaintStatus}}</td>
                                <td>{{com.userName}}</td>
                                <td>{{com.parentDepartmentName}}</td>
                                <td>
                                    <i class="fa-solid fa-pen-to-square m-1 bg-info text-white p-2" data-bs-toggle="modal" data-bs-target="#complaintform"  (click)="onEdit(com)" (click)="showupdatebtn()"></i>
            <i class="fa-solid fa-trash bg-danger m-1 text-white p-2" (click)="onDelete(com)"></i>
                                   
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="modal" id="complaintform">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: orange; font-size: 20px;">
                    Add New Complaint
                    <button class="btn closebtn btn-danger" data-bs-dismiss="modal" style="float: right;"><i class="fa-solid fa-xmark"></i></button>

                </div>
                <div class="modal-body">
                    <form #myform="ngForm">
                    <div class="row">
                        <div class="col-6">
                            <label>UserName</label><br>
                            <select name="usernm" #usernm="ngModel" [(ngModel)]="complaintobj.userId">
                                <option value="0" selected>Select UserName</option>
                                <option *ngFor="let user of userList" [value]="user.userId">{{user.userName}}</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <label for="">Create Date</label><br>
                            <input type="date" name="date" #date="ngModel" [(ngModel)]="complaintobj.createdDate">
                        </div>
                        <div class="col-6">
                            <label for="">Complaint Title</label>
                            <input type="text" name="title" #title="ngModel" [(ngModel)]="complaintobj.complaintTitle">
                        </div>
                        <!-- <div class="col-6">
                            <label for="">Complaint No</label>
                            <input type="text" name="cno" #cno="ngModel" [(ngModel)]="complaintobj.complaintNo">
                        </div> -->
                        <div class="col-6">
                            <label for="">Complaint Details</label>
                            <input type="text" name="cdetails" #cdetails="ngModel" [(ngModel)]="complaintobj.complaintDetails">
                        </div>
                        <div class="col-6">
                            <label >isAlreadyReportedThis</label>
                            <input type="checkbox" class="m-2" name="alreadyrepo" #alreadyrepo="ngModel" [(ngModel)]="complaintobj.isAlreadyReportedThis">
                        </div>
                        <!-- <div class="col-6">
                            <label for="">Old Complaint No</label>
                            <input type="text" name="oldcno" #oldcno="ngModel" [(ngModel)]="complaintobj.oldComplaintNo">
                        </div> -->
                        <div class="col-6">
                            <label>Complaint Status</label><br>
                            <select name="cstatus" #cstatus="ngModel" [(ngModel)]="complaintobj.complaintStatusId">
                                <option value="0" selected>Select Status</option>
                                <option *ngFor="let status of statusList" [value]="status.masterId">{{status.masterName}}</option>
                            </select>
                        </div>
                        
                    </div>
                </form>
                </div>
                <div class="modal-footer" style="background-color: pink;">
                    <button class="btn btn-success" *ngIf="savebtn==true" (click)="onSave()">Submit</button>
                    <button class="btn btn-info" *ngIf="updatebtn==true" (click)="onUpdate()">Update</button>
                    <button class="btn btn-danger" (click)="onReset()">Reset</button>
                </div>
            </div>
        </div>

    </div>
</div>

